<div class="bg-white rounded-lg shadow-md p-6">
  <h2 class="text-xl font-semibold text-gray-800 mb-6">
    DistribuciÃ³n de Tareas por Estado
  </h2>

  <div class="flex items-end justify-around gap-4 h-64 mb-4">
    @for (data of statusData(); track data.status) {
    <div class="flex flex-col items-center flex-1">
      <!-- Barra -->
      <div class="relative w-full flex items-end justify-center h-48">
        <div
          class="w-full rounded-t-lg transition-all duration-500 ease-out relative group"
          [class]="getStatusColor(data.status)"
          [style.height.%]="getBarHeight(data.count)"
        >
          <!-- Tooltip -->
          <div
            class="absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap"
          >
            {{ data.count }} tareas ({{ data.percentage | number: '1.1-1' }}%)
          </div>
          <!-- Valor en la barra -->
          <div
            class="absolute top-2 left-1/2 transform -translate-x-1/2 text-white font-bold text-lg"
          >
            {{ data.count }}
          </div>
        </div>
      </div>

      <!-- Label -->
      <div class="mt-3 text-center">
        <p class="text-xs font-medium text-gray-600 break-words">
          {{ data.status }}
        </p>
      </div>
    </div>
    }
  </div>

  <!-- Leyenda -->
  <div class="flex flex-wrap justify-center gap-4 pt-4 border-t">
    @for (data of statusData(); track data.status) {
    <div class="flex items-center gap-2">
      <div
        class="w-3 h-3 rounded-sm"
        [class]="getStatusColor(data.status)"
      ></div>
      <span class="text-sm text-gray-600">{{ data.status }}</span>
    </div>
    }
  </div>
</div>
